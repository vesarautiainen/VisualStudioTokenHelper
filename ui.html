<link rel="stylesheet" href="https://static.figma.com/api/figma-extension-api-0.0.1.css">

<div>
  <div id:"color-tokens">
    <h2>Color Tokens</h2>
    <div>
      <div style="margin-top:10px;" id="color-list"></div>
      <button id="create-color-all">Annotate All Color Tokens</button>
    </div>
  </div>
  <div id:"font-tokens">
    <h2>Font Tokens</h2>
    <div>
      <div id="typography-list"></div>
      <button id="create-typography-all">Annotate All Fonts</button>
    </div>
  </div>
</div>

<script>
onmessage = (event) => {
  console.log("got this from the plugin code2", event.data.pluginMessage)
  listTokens(event.data.pluginMessage.ColorStyles, "color-list")
  listTokens(event.data.pluginMessage.TextStyles, "typography-list")
}

function listTokens(tokenArray, listId) {
  let targetList = document.getElementById(listId);

  tokenArray.forEach(function (token) {
    let div = document.createElement("div");
    div.textContent = token.value
    div.style = "height:20px;"
    div.id = token.nodeId;
    targetList.appendChild(div);
  }); 
}

var hoverCallback = function(sender) {
  console.log(sender.id)
  parent.postMessage({ pluginMessage: { type: 'token-hover', nodeId: sender.id} }, '*')
}

document.getElementById('create-typography-all').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'create-typography-annotation-all'} }, '*')
}

/**
document.getElementById('cancel').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')
}
*/

</script>
